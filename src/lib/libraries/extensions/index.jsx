import React from 'react';
import {FormattedMessage} from 'react-intl';

import rxFSIconURL from './rxfs/rxfs.svg';
import rxFSInsetIconURL from './rxfs/rxfsicon.svg';

import iframeIconURL from './iframe/iframemain.png';

import messageIconURL from './message/messagemain.jpg';

import anitextIconURL from './anitext/anitextmain.png';
import anitextInsetIconURL from './anitext/anitext.svg';
const anitextExtension = 'data:text/javascript;base64,KGZ1bmN0aW9uIChTY3JhdGNoKSB7DQogICAgJ3VzZSBzdHJpY3QnOw0KICAgIFNjcmF0Y2gudHJhbnNsYXRlLnNldHVwKHsNCiAgICAgICAgemg6IHsNCiAgICAgICAgICAgIG5hbWU6ICLliqjnlLvmloflrZciLA0KICAgICAgICAgICAgc2V0VGV4dDogIuaYvuekuuaWh+WtlyBbVEVYVF0iLA0KICAgICAgICAgICAgc2V0VGV4dF9kZWZhdWx0VmFsdWU6ICLmrKLov47mnaXliLDmiJHnmoTpobnnm67vvIEiLA0KICAgICAgICAgICAgYW5pbWF0ZVRleHQ6ICLlsIbnibnmlYjorr7kuLogW0FOSU1BVEVdIOaYvuekuuaWh+WtlyBbVEVYVF0iLA0KICAgICAgICAgICAgYW5pbWF0ZVRleHRfZGVmYXVsdFZhbHVlOiAi5byA5aeL5ZCn77yBIiwNCiAgICAgICAgICAgIGNsZWFyVGV4dDogIuaYvuekuuinkuiJsiIsDQogICAgICAgICAgICBzZXRGb250OiAi5bCG5a2X5L2T6K6+5Li6IFtGT05UXSIsDQogICAgICAgICAgICBzZXRDb2xvcjogIuWwhuaWh+Wtl+minOiJsuiuvuS4uiBbQ09MT1JdIiwNCiAgICAgICAgICAgIHNldFdpZHRoOiAi5bCG5paH5a2X5a695bqm6K6+5Li6IFtXSURUSF0g6Z2gIFtBTElHTl0g5a+56b2QIiwNCiAgICAgICAgICAgIHRleHRBY3RpdmU6ICLmraPlnKjmmL7npLrmloflrZfvvJ8iLA0KICAgICAgICAgICAgZ2V0VGV4dEF0dHJpYnV0ZTogIuaWh+Wtl+eahCBbQVRUUklCVVRFXSIsDQogICAgICAgICAgICBhbmltYXRlVGV4dEFkdjogIuS7pSBbVElDS10g5q+r56eS77yP5a2X77yM5omT5a2XIFtURVhUXSIsDQogICAgICAgICAgICB0eXBlOiAi5omT5a2XIiwNCiAgICAgICAgICAgIHJhaW5ib3c6ICLlvanombkiLA0KICAgICAgICAgICAgem9vbTogIuaUvuWkpyIsDQogICAgICAgICAgICByYW5kb206ICLpmo/mnLrlrZfkvZMiLA0KICAgICAgICAgICAgbGVmdDogIuW3piIsDQogICAgICAgICAgICBjZW50ZXI6ICLkuK3lv4MiLA0KICAgICAgICAgICAgcmlnaHQ6ICLlj7MiLA0KICAgICAgICAgICAgZm9udDogIuWtl+S9kyIsDQogICAgICAgICAgICBjb2xvcjogIuminOiJsiIsDQogICAgICAgICAgICB3aWR0aDogIuWuveW6piIsDQogICAgICAgICAgICBhbmltYXRlVGV4dFNwZWVkOiAi5bCG5omT5a2X6YCf5bqm6K6+5Li6IFtTUEVFRF0iLA0KICAgICAgICAgICAgaW5mOiAi5b+r6YCf5a6M5oiQIiwNCiAgICAgICAgICAgIHBhdXNlOiAi5pqC5YGcIg0KICAgICAgICB9DQogICAgfSk7DQoNCiAgICAvLyBUaGlzIGV4dGVuc2lvbiB3YXMgY3JlYXRlZCBieSBtYWtpbmcgcHJvamVjdHMgd2l0aCBodHRwczovL2xhYi5zY3JhdGNoLm1pdC5lZHUvdGV4dC8NCiAgICAvLyBUbyBkZXRlcm1pbmUgYmxvY2sgYW5kIGFyZ3VtZW50IElEcywgd2UgZXh0cmFjdGVkIHByb2plY3QuanNvbiBhbmQgZXhhbWluZWQgdGhlIHJlc3VsdC4NCiAgICAvLyBUbyBkZXRlcm1pbmUgYmxvY2sgYmVoYXZpb3JzIHdlIHNpbXBseSBleHBlcmltZW50IHdpdGggU2NyYXRjaCBMYWJzIGFuZCBtYWRlIHN1cmUgb3VyDQogICAgLy8gYmxvY2tzIGRvIHRoZSBzYW1lIHRoaW5ncy4NCiAgICAvLyBUaGlzIGV4dGVuc2lvbidzIGNvZGUgaXMgbm90IGJhc2VkIG9uIHRoZSBzb3VyY2UgY29kZSBvZiBTY3JhdGNoIExhYnMuDQoNCiAgICAvLyBieSBATHVrZU1hbmlhU3R1ZGlvcw0KDQogICAgY29uc3QgYmxvY2tJY29uVVJJID0gJ2RhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjNhV1IwYUQwaU5EQWlJR2hsYVdkb2REMGlOREFpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUkrUEdjZ1ptbHNiRDBpYm05dVpTSWdabWxzYkMxeWRXeGxQU0psZG1WdWIyUmtJajQ4Y0dGMGFDQmtQU0pOTWpjdU9ETTBJRGxoTXlBeklEQWdNREV5TGpVME5pQXhMalF4TW13dU1EazNMakUyTnk0d05UUXVNVEV1TURVeUxqRXhNaTR3TkRndU1URXlJRFl1TWpJeUlERTJZVE11TURBeElETXVNREF4SURBZ01ERXRNaTR5TnlBMExqQTBNV3d0TGpFNExqQXlOUzB1TVRFMUxqQXhNUzB1TVRFMkxqQXdOeTB1TVRFMUxqQXdNMmd0TVM0NE5UVmhNeUF6SURBZ01ERXRNaTQxTkRVdE1TNDBNVEpzTFM0d09UWXRMakUyTnkwdU1UQTNMUzR5TWpJdExqQTBPQzB1TVRFeFRESTRMams0TXlBeU9HZ3ROQzQ1TTJ3dExqUXlNaUF4TGpBNE4yRXpMakF3TXlBekxqQXdNeUF3SURBeExUSXVOREVnTVM0NE9EbHNMUzR4T1RNdU1ERTRMUzR4T1RRdU1EQTJMVEV1T1RRdExqQXdNaTB1TURrMkxqQXdNa2czWVRNZ015QXdJREF4TFRJdU9EY3RNeTQ0TnpKc0xqQTNNaTB1TWpBNUlEWXVNVGd6TFRFMllUTXVNREF4SURNdU1EQXhJREFnTURFeUxqWXdOQzB4TGpreE0wd3hNeTR4T0RRZ09Xd3pMamt1TURBeExqQTVPUzB1TURBeElETXVPVEkwTGpBd01pNHdPVFV0TGpBd01pQXpMamt3TlM0d01ESXVNRGsxTFM0d01ESm9NaTQyTXpKNklpQm1hV3hzTFc5d1lXTnBkSGs5SWk0eE5TSWdabWxzYkQwaUl6QXdNQ0l2UGp4d1lYUm9JR1E5SWsweU5TNDJOak1nTWpGc0xqZ3hOaTB5TGpBNU9TNDRNVFlnTWk0d09UbG9MVEV1TmpNeWVtMHhNQzR5TlRnZ05pNHlOelZzTFRZdU1qSXpMVEUyTFM0d056VXRMakUyT0MwdU1EZzFMUzR4TkRWakxTNHpPRGN0TGpZeE1TMHhMakF4T1MwdU9UWXlMVEV1TnpBekxTNDVOakpvTFRJdU5qTXpiQzB1TURrMkxqQXdNaTB1TURZeUxTNHdNREZNTWpFdU1qQXlJREV3YkMwdU1EazJMakF3TWkwdU1EWXlMUzR3TURGTU1UY3VNVGd6SURFd2JDMHVNRGcyTGpBd01rd3hNeTR4T0RRZ01UQnNMUzR4TmpVdU1EQTNZVEl1TURBeklESXVNREF6SURBZ01EQXRNUzQzTURJZ01TNHlOekpzTFRZdU1UZ3lJREUyTFM0d05Ua3VNVGMxUVRJZ01pQXdJREF3TnlBek1HZ3hNUzQzT1Roc0xqQTRPQzB1TURBeUlERXVPVFE1TGpBd01pNHhOak10TGpBd055NHhOakV0TGpBeE9XRXlJRElnTUNBd01ERXVOVE01TFRFdU1qUTViQzQyTnkweExqY3lOV2cyTGpJNU9Xd3VOamN5SURFdU56STJMakEzTkM0eE5qY3VNRGcyTGpFME5XTXVNemczTGpZeE1TQXhMakF4T0M0NU5qSWdNUzQzTURNdU9UWXlhREV1T0RVMWJDNHhOelF0TGpBd09TNHhOalF0TGpBeU5HTXVPVGMyTFM0eE9EY2dNUzQyTmpJdE1TNHdNRE1nTVM0Mk5qSXRNUzQ1TmpjZ01DMHVNalE0TFM0d05EWXRMalE1TkMwdU1UTTJMUzQzTWpWNklpQm1hV3hzTFc5d1lXTnBkSGs5SWk0eU5TSWdabWxzYkQwaUl6QXdNQ0l2UGp4d1lYUm9JR1E5SWsweE15NHhPRE1nTVRGb015NDRNVGhoTVNBeElEQWdNREV1T1RReElERXVNek00YkMwMUxqYzBNaUF4Tm1FeElERWdNQ0F3TVMwdU9UUXVOall5U0RkaE1TQXhJREFnTURFdExqa3pNeTB4TGpNMmJEWXVNVGd6TFRFMllURWdNU0F3SURBeExqa3pNeTB1TmpSNklpQm1hV3hzUFNJak5FTTVOMFpHSWk4K1BIQmhkR2dnWkQwaVRURTNMakU0TXlBeE1VZ3lNV0V4SURFZ01DQXdNUzQ1TkRJZ01TNHpNemhzTFRVdU56UXlJREUyWVRFZ01TQXdJREF4TFM0NU5ERXVOall5YUMwMExqSTJZVEVnTVNBd0lEQXhMUzQ1TXpJdE1TNHpObXcyTGpFNE15MHhObUV4SURFZ01DQXdNUzQ1TXpNdExqWTBlaUlnWm1sc2JEMGlJME5HTmpORFJpSXZQanh3WVhSb0lHUTlJazB5TVM0eU1ESWdNVEZJTWpWaE1TQXhJREFnTURFdU9UTXpJREV1TXpZeGJDMDJMakl3TXlBeE5tRXhJREVnTUNBd01TMHVPVE15TGpZek9VZ3hOV0V4SURFZ01DQXdNUzB1T1RNekxURXVNell4YkRZdU1qQXpMVEUyWVRFZ01TQXdJREF4TGprek1pMHVOak01ZWlJZ1ptbHNiRDBpSTBaR1FrWXdNQ0l2UGp4d1lYUm9JR1E5SWsweU55NDRNelFnTVRGaE1TQXhJREFnTURFdU9UTXlMall6T0d3MkxqSXlNaUF4TmtFeElERWdNQ0F3TVRNMExqQTFOaUF5T1dndE1TNDROVFJoTVNBeElEQWdNREV0TGprek1pMHVOak00VERNd0xqTTFNU0F5Tm1ndE55NDJOalpzTFM0NU1Ua2dNaTR6TmpKaE1TQXhJREFnTURFdExqa3pNaTQyTXpoSU1UZ3VPVGhoTVNBeElEQWdNREV0TGprek1pMHhMak0yTW13MkxqSXlNaTB4Tm1FeElERWdNQ0F3TVM0NU16SXRMall6T0hwdExURXVNekUySURVdU1UUXpUREkwTGpJMElESXlhRFF1TlRVMmJDMHlMakkzT0MwMUxqZzFOM29pSUdacGJHdzlJaU5HUmtZaUx6NDhMMmMrUEM5emRtYysnOw0KDQogICAgY29uc3QgQ1VTVE9NX1NUQVRFX0tFWSA9IFN5bWJvbCgpOw0KDQogICAgY29uc3QgQUxJR05fTEVGVCA9IDA7DQogICAgY29uc3QgQUxJR05fUklHSFQgPSAxOw0KICAgIGNvbnN0IEFMSUdOX0NFTlRFUiA9IDI7DQoNCiAgICBjb25zdCB2bSA9IFNjcmF0Y2gudm07DQogICAgY29uc3QgcmVuZGVyZXIgPSB2bS5yZW5kZXJlcjsNCiAgICBjb25zdCBnbCA9IHJlbmRlcmVyLmdsOw0KDQogICAgY29uc3QgTkFUSVZFX0ZPTlRTID0gWw0KICAgICAgICAnU2FucyBTZXJpZicsDQogICAgICAgICdTZXJpZicsDQogICAgICAgICdIYW5kd3JpdGluZycsDQogICAgICAgICdNYXJrZXInLA0KICAgICAgICAnQ3VybHknLA0KICAgICAgICAnUGl4ZWwnLA0KICAgIF07DQoNCiAgICBjb25zdCBERUZBVUxUX0NPTE9SID0gJyM1NzVlNzUnOw0KICAgIGNvbnN0IERFRkFVTFRfRk9OVCA9ICdIYW5kd3JpdGluZyc7DQogICAgY29uc3QgREVGQVVMVF9XSURUSCA9IHZtLnJ1bnRpbWUuc3RhZ2VXaWR0aDsNCiAgICBjb25zdCBERUZBVUxUX0FMSUdOID0gQUxJR05fQ0VOVEVSOw0KICAgIGNvbnN0IERFRkFVTFRfRk9OVF9TSVpFID0gMjQ7DQoNCiAgICBjb25zdCBUWVBFX0RFTEFZID0gMTAwMCAvIDE1Ow0KDQogICAgY29uc3QgUkFJTkJPV19USU1FX1BFUiA9IDEwMDA7DQogICAgY29uc3QgUkFJTkJPV19EVVJBVElPTiA9IDIwMDA7DQoNCiAgICBjb25zdCBaT09NX0RVUkFUSU9OID0gNTAwOw0KDQogICAgbGV0IGdsb2JhbEZyYW1lVGltZSA9IDA7DQoNCiAgICBsZXQgdHlwZVNwZWVkID0gMTsNCg0KICAgIC8qKg0KICAgICAqIEB0eXBlZGVmIFRleHRTdGF0ZQ0KICAgICAqIEBwcm9wZXJ0eSB7VGV4dENvc3R1bWVTa2lufSBza2luDQogICAgICovDQoNCiAgICBjb25zdCBTa2luID0gcmVuZGVyZXIuZXhwb3J0cy5Ta2luOw0KICAgIGNvbnN0IENhbnZhc01lYXN1cmVtZW50UHJvdmlkZXIgPSByZW5kZXJlci5leHBvcnRzLkNhbnZhc01lYXN1cmVtZW50UHJvdmlkZXI7DQogICAgY29uc3QgdHdnbCA9IHJlbmRlcmVyLmV4cG9ydHMudHdnbDsNCiAgICBjb25zdCBSZW5kZXJlZFRhcmdldCA9IHZtLmV4cG9ydHMuUmVuZGVyZWRUYXJnZXQ7DQoNCiAgICAvKioNCiAgICAgKiBAcGFyYW0ge251bWJlcn0gYw0KICAgICAqIEByZXR1cm5zIHtzdHJpbmd9DQogICAgICovDQogICAgY29uc3QgZm9ybWF0Q29tcG9uZW50ID0gKGMpID0+IE1hdGgucm91bmQoYykudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJyk7DQoNCiAgICAvKioNCiAgICAgKiBAcGFyYW0ge1tudW1iZXIsIG51bWJlciwgbnVtYmVyXX0gY29sb3INCiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfQ0KICAgICAqLw0KICAgIGNvbnN0IGZvcm1hdENvbG9yID0gKGNvbG9yKSA9PiBgIyR7Zm9ybWF0Q29tcG9uZW50KGNvbG9yWzBdKX0ke2Zvcm1hdENvbXBvbmVudChjb2xvclsxXSl9JHtmb3JtYXRDb21wb25lbnQoY29sb3JbMl0pfWA7DQoNCiAgICAvKioNCiAgICAgKiBAcGFyYW0ge251bWJlcn0gaCBodWUgZnJvbSAwLTENCiAgICAgKiBAcGFyYW0ge251bWJlcn0gcyBzYXR1cmF0aW9uIGZyb20gMC0xDQogICAgICogQHBhcmFtIHtudW1iZXJ9IHYgdmFsdWUgZnJvbSAwLTENCiAgICAgKiBAcmV0dXJucyB7W251bWJlciwgbnVtYmVyLCBudW1iZXJdfSBSR0IgY2hhbm5lbHMgZnJvbSAwLTI1NQ0KICAgICAqLw0KICAgIGNvbnN0IGhzdlRvUkdCID0gKGgsIHMsIHYpID0+IHsNCiAgICAgICAgLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSFNMX2FuZF9IU1YNCiAgICAgICAgdmFyIHIsIGcsIGI7DQogICAgICAgIHZhciBpID0gTWF0aC5mbG9vcihoICogNik7DQogICAgICAgIHZhciBmID0gaCAqIDYgLSBpOw0KICAgICAgICB2YXIgcCA9IHYgKiAoMSAtIHMpOw0KICAgICAgICB2YXIgcSA9IHYgKiAoMSAtIGYgKiBzKTsNCiAgICAgICAgdmFyIHQgPSB2ICogKDEgLSAoMSAtIGYpICogcyk7DQogICAgICAgIHN3aXRjaCAoaSAlIDYpIHsNCiAgICAgICAgICAgIGNhc2UgMDogciA9IHYsIGcgPSB0LCBiID0gcDsgYnJlYWs7DQogICAgICAgICAgICBjYXNlIDE6IHIgPSBxLCBnID0gdiwgYiA9IHA7IGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAyOiByID0gcCwgZyA9IHYsIGIgPSB0OyBicmVhazsNCiAgICAgICAgICAgIGNhc2UgMzogciA9IHAsIGcgPSBxLCBiID0gdjsgYnJlYWs7DQogICAgICAgICAgICBjYXNlIDQ6IHIgPSB0LCBnID0gcCwgYiA9IHY7IGJyZWFrOw0KICAgICAgICAgICAgY2FzZSA1OiByID0gdiwgZyA9IHAsIGIgPSBxOyBicmVhazsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gW3IgKiAyNTUgfCAwLCBnICogMjU1IHwgMCwgYiAqIDI1NSB8IDBdOw0KICAgIH07DQoNCiAgICAvKioNCiAgICAgKiBAcGFyYW0ge0NhbnZhc0dyYWRpZW50fSBncmFkaWVudA0KICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgbnVtYmVyIG9mIGN5Y2xlcyB0byBvZmZzZXQgYnkNCiAgICAgKi8NCiAgICBjb25zdCBhZGRSYWluYm93U3RvcHMgPSAoZ3JhZGllbnQsIG9mZnNldCkgPT4gew0KICAgICAgICBjb25zdCBOVU1CRVJfU1RPUFMgPSAyMDsNCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBOVU1CRVJfU1RPUFM7IGkrKykgew0KICAgICAgICAgICAgY29uc3QgZXhhY3RQb3NpdGlvbiA9IGkgLyBOVU1CRVJfU1RPUFM7DQogICAgICAgICAgICBsZXQgb2Zmc2V0UG9zaXRpb24gPSAoZXhhY3RQb3NpdGlvbiAtIG9mZnNldCkgJSAxOw0KICAgICAgICAgICAgaWYgKG9mZnNldFBvc2l0aW9uIDwgMCkgew0KICAgICAgICAgICAgICAgIG9mZnNldFBvc2l0aW9uICs9IDE7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjb25zdCByZ2IgPSBoc3ZUb1JHQihvZmZzZXRQb3NpdGlvbiwgMSwgMSk7DQogICAgICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoZXhhY3RQb3NpdGlvbiwgZm9ybWF0Q29sb3IocmdiKSk7DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAgY2xhc3MgVGV4dENvc3R1bWVTa2luIGV4dGVuZHMgU2tpbiB7DQogICAgICAgIGNvbnN0cnVjdG9yKGlkLCBkcmF3YWJsZSkgew0KICAgICAgICAgICAgc3VwZXIoaWQsIHJlbmRlcmVyKTsNCg0KICAgICAgICAgICAgLyoqIEB0eXBlIHtSZW5kZXJXZWJHTC5EcmF3YWJsZX0gKi8NCiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUgPSBkcmF3YWJsZTsNCiAgICAgICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqLw0KICAgICAgICAgICAgdGhpcy5fcHJldmlvdXNEcmF3YWJsZVhTY2FsZSA9IDEwMDsNCg0KICAgICAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsNCiAgICAgICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gMDsNCiAgICAgICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IDA7DQogICAgICAgICAgICB0aGlzLmN0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7DQoNCiAgICAgICAgICAgIHRoaXMudGV4dCA9ICcnOw0KICAgICAgICAgICAgdGhpcy5jb2xvciA9IERFRkFVTFRfQ09MT1I7DQogICAgICAgICAgICB0aGlzLnRleHRXaWR0aCA9IERFRkFVTFRfV0lEVEg7DQogICAgICAgICAgICB0aGlzLmZvbnRGYW1pbHkgPSBERUZBVUxUX0ZPTlQ7DQogICAgICAgICAgICB0aGlzLmJhc2VGb250U2l6ZSA9IERFRkFVTFRfRk9OVF9TSVpFOw0KICAgICAgICAgICAgdGhpcy5hbGlnbiA9IERFRkFVTFRfQUxJR047DQoNCiAgICAgICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8e3RleHQ6IHN0cmluZzsgd2lkdGg6IG51bWJlcjt9Pn0gKi8NCiAgICAgICAgICAgIHRoaXMubGluZXMgPSBbXTsNCiAgICAgICAgICAgIC8qKiBAdHlwZSB7W251bWJlciwgbnVtYmVyXX0gKi8NCiAgICAgICAgICAgIHRoaXMuX3NpemUgPSBbMCwgMF07DQogICAgICAgICAgICAvKiogQHR5cGUge1tudW1iZXIsIG51bWJlcl19ICovDQogICAgICAgICAgICB0aGlzLl9yb3RhdGlvbkNlbnRlciA9IFswLCAwXTsNCg0KICAgICAgICAgICAgLy8gVXBkYXRlZCBpbiBfdXBkYXRlRm9udERpbWVuc2lvbnMNCiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlZEZvbnRTaXplID0gMDsNCiAgICAgICAgICAgIHRoaXMubGluZUhlaWdodCA9IDA7DQogICAgICAgICAgICB0aGlzLnZlcnRpY2FsUGFkZGluZyA9IDA7DQogICAgICAgICAgICB0aGlzLndyYXBXaWR0aCA9IDA7DQoNCiAgICAgICAgICAgIHRoaXMuX3RleHREaXJ0eSA9IGZhbHNlOw0KICAgICAgICAgICAgdGhpcy5fdGV4dHVyZURpcnR5ID0gZmFsc2U7DQogICAgICAgICAgICB0aGlzLl9yZW5kZXJlZEF0U2NhbGUgPSAxOw0KICAgICAgICAgICAgdGhpcy5fcmVuZGVyVGltZSA9IDA7DQogICAgICAgICAgICB0aGlzLl9yZWZsb3dUaW1lID0gMDsNCg0KICAgICAgICAgICAgdGhpcy50eXBlQW5pbWF0aW9uSW50ZXJ2YWwgPSBudWxsOw0KDQogICAgICAgICAgICB0aGlzLmlzUmFpbmJvdyA9IGZhbHNlOw0KICAgICAgICAgICAgdGhpcy5yYWluYm93U3RhcnRUaW1lID0gMDsNCiAgICAgICAgICAgIHRoaXMucmFpbmJvd1RpbWVvdXQgPSBudWxsOw0KDQogICAgICAgICAgICB0aGlzLmlzWm9vbWluZyA9IGZhbHNlOw0KICAgICAgICAgICAgdGhpcy56b29tU3RhcnRUaW1lID0gMDsNCiAgICAgICAgICAgIHRoaXMuem9vbVRpbWVvdXQgPSBudWxsOw0KDQogICAgICAgICAgICAvKiogQHR5cGUgeygoKSA9PiB2b2lkKXxudWxsfSAqLw0KICAgICAgICAgICAgdGhpcy5yZXNvbHZlT25nb2luZ0FuaW1hdGlvbiA9IG51bGw7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBQYXJ0IG9mIFNraW4gQVBJDQogICAgICAgIGRpc3Bvc2UoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5fdGV4dHVyZSkgew0KICAgICAgICAgICAgICAgIGdsLmRlbGV0ZVRleHR1cmUodGhpcy5fdGV4dHVyZSk7DQogICAgICAgICAgICAgICAgdGhpcy5fdGV4dHVyZSA9IG51bGw7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmNhbnZhcyA9IG51bGw7DQogICAgICAgICAgICB0aGlzLmN0eCA9IG51bGw7DQogICAgICAgICAgICBzdXBlci5kaXNwb3NlKCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBQYXJ0IG9mIFNraW4gQVBJDQogICAgICAgIGdldCBzaXplKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuX25lZWRzUmVmbG93KCkpIHsNCiAgICAgICAgICAgICAgICB0aGlzLl9yZWZsb3dUZXh0KCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gdGhpcy5fc2l6ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFBhcnQgb2YgU2tpbiBBUEkNCiAgICAgICAgdXNlTmVhcmVzdCgpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIF9uZWVkc1JlZmxvdygpIHsNCiAgICAgICAgICAgIHJldHVybiAoDQogICAgICAgICAgICAgICAgdGhpcy5fdGV4dERpcnR5IHx8DQogICAgICAgICAgICAgICAgKHRoaXMuaXNab29taW5nICYmIHRoaXMuX3JlZmxvd1RpbWUgIT09IGdsb2JhbEZyYW1lVGltZSkgfHwNCiAgICAgICAgICAgICAgICB0aGlzLl9wcmV2aW91c0RyYXdhYmxlWFNjYWxlICE9PSBNYXRoLmFicyh0aGlzLmRyYXdhYmxlLnNjYWxlWzBdKQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgfQ0KDQogICAgICAgIF91cGRhdGVGb250RGltZW5zaW9ucygpIHsNCiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlZEZvbnRTaXplID0gdGhpcy5iYXNlRm9udFNpemU7DQogICAgICAgICAgICBpZiAodGhpcy5pc1pvb21pbmcpIHsNCiAgICAgICAgICAgICAgICAvLyBUT0RPOiBpdCBsb29rcyBsaWtlIFNjcmF0Y2gncyBhbmltYXRpb24gYWx3YXlzIHN0YXJ0cyBhdCBsZWFzdCBhIGxpdHRsZSB2aXNpYmxlDQogICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IGdsb2JhbEZyYW1lVGltZSAtIHRoaXMuem9vbVN0YXJ0VGltZTsNCiAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHRpbWUgLyBaT09NX0RVUkFUSU9OKSk7DQogICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVkRm9udFNpemUgKj0gcHJvZ3Jlc3M7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmxpbmVIZWlnaHQgPSB0aGlzLmJhc2VGb250U2l6ZSAqIDggLyA3Ow0KICAgICAgICAgICAgLy8gQWx3YXlzIHVzZSB0aGUgYmFzZSBzaXplIGZvciBwYWRkaW5nLiBUaGlzIG1ha2VzIHRoZSB6b29tIGFuaW1hdGlvbiBsb29rIGJldHRlci4NCiAgICAgICAgICAgIHRoaXMudmVydGljYWxQYWRkaW5nID0gdGhpcy5iYXNlRm9udFNpemUgLyA3Ow0KICAgICAgICAgICAgLy8gT25seSB1c2UgaG9yaXpvbnRhbCBzY2FsZSBmb3Igd3JhcCB3aWR0aCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHN0cmV0Y2ggZXh0ZW5zaW9uLg0KICAgICAgICAgICAgdGhpcy53cmFwV2lkdGggPSB0aGlzLnRleHRXaWR0aCAvIChNYXRoLmFicyh0aGlzLmRyYXdhYmxlLnNjYWxlWzBdKSAvIDEwMCk7DQogICAgICAgIH0NCg0KICAgICAgICBfZ2V0Rm9udFN0eWxlKCkgew0KICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuY2FsY3VsYXRlZEZvbnRTaXplfXB4ICIke3RoaXMuZm9udEZhbWlseX0iLCBzYW5zLXNlcmlmYDsNCiAgICAgICAgfQ0KDQogICAgICAgIF9yZWZsb3dUZXh0KCkgew0KICAgICAgICAgICAgdGhpcy5fdGV4dERpcnR5ID0gZmFsc2U7DQogICAgICAgICAgICB0aGlzLl90ZXh0dXJlRGlydHkgPSB0cnVlOw0KICAgICAgICAgICAgdGhpcy5fcmVmbG93VGltZSA9IGdsb2JhbEZyYW1lVGltZTsNCiAgICAgICAgICAgIHRoaXMuX3ByZXZpb3VzRHJhd2FibGVYU2NhbGUgPSBNYXRoLmFicyh0aGlzLmRyYXdhYmxlLnNjYWxlWzBdKTsNCg0KICAgICAgICAgICAgdGhpcy5fdXBkYXRlRm9udERpbWVuc2lvbnMoKTsNCiAgICAgICAgICAgIHRoaXMuY3R4LmZvbnQgPSB0aGlzLl9nZXRGb250U3R5bGUoKTsNCg0KICAgICAgICAgICAgLy8gbmVlZCB0byBtYWtlIG5ldyBvbmVzIGVhY2ggdGltZSB0byBhdm9pZCBjYWNoaW5nIGluY29ycmVjdGx5IGFjcm9zcyBmb250cw0KICAgICAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRQcm92aWRlciA9IG5ldyBDYW52YXNNZWFzdXJlbWVudFByb3ZpZGVyKHRoaXMuY3R4KTsNCiAgICAgICAgICAgIC8qKiBAdHlwZSB7UmVuZGVyV2ViR0wuVGV4dFdyYXBwZXJ9ICovDQogICAgICAgICAgICBjb25zdCB0ZXh0V3JhcHBlciA9IHJlbmRlcmVyLmNyZWF0ZVRleHRXcmFwcGVyKG1lYXN1cmVtZW50UHJvdmlkZXIpOw0KDQogICAgICAgICAgICBjb25zdCBsaW5lcyA9IHRleHRXcmFwcGVyLndyYXBUZXh0KHRoaXMud3JhcFdpZHRoLCB0aGlzLnRleHQpOw0KICAgICAgICAgICAgdGhpcy5saW5lcyA9IGxpbmVzLm1hcChsaW5lID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCB0cmltbWVkID0gbGluZS50cmltRW5kKCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgICAgdGV4dDogdHJpbW1lZCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IG1lYXN1cmVtZW50UHJvdmlkZXIubWVhc3VyZVRleHQodHJpbW1lZCkNCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHRoaXMuX3NpemVbMF0gPSB0aGlzLndyYXBXaWR0aDsNCiAgICAgICAgICAgIHRoaXMuX3NpemVbMV0gPSB0aGlzLmxpbmVzLmxlbmd0aCAqIHRoaXMubGluZUhlaWdodCArIDIgKiB0aGlzLnZlcnRpY2FsUGFkZGluZzsNCg0KICAgICAgICAgICAgLy8gQ2VudGVyZWQgaG9yaXpvbnRhbGx5DQogICAgICAgICAgICB0aGlzLl9yb3RhdGlvbkNlbnRlclswXSA9IHRoaXMuX3NpemVbMF0gLyAyOw0KICAgICAgICAgICAgLy8gVmVydGljYWwgY2VudGVyIGlzIHJvdWdobHkgYmVsb3cgdGhlIGZpcnN0IGxpbmUgb2YgdGV4dA0KICAgICAgICAgICAgdGhpcy5fcm90YXRpb25DZW50ZXJbMV0gPSB0aGlzLmNhbGN1bGF0ZWRGb250U2l6ZSAqIDAuOSArIHRoaXMudmVydGljYWxQYWRkaW5nOw0KICAgICAgICB9DQoNCiAgICAgICAgX3JlbmRlckF0U2NhbGUocmVxdWVzdGVkU2NhbGUpIHsNCiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkQXRTY2FsZSA9IHJlcXVlc3RlZFNjYWxlOw0KICAgICAgICAgICAgdGhpcy5fdGV4dHVyZURpcnR5ID0gZmFsc2U7DQogICAgICAgICAgICB0aGlzLl9yZW5kZXJUaW1lID0gZ2xvYmFsRnJhbWVUaW1lOw0KDQogICAgICAgICAgICBjb25zdCBzY3JhdGNoV2lkdGggPSB0aGlzLl9zaXplWzBdOw0KICAgICAgICAgICAgY29uc3Qgc2NyYXRjaEhlaWdodCA9IHRoaXMuX3NpemVbMV07DQoNCiAgICAgICAgICAgIC8vIFJlbmRlcmVyJ3MgcmVxdWVzdGVkIHNjYWxlIGlzIGFjY291bnRlZCBmb3IgYXQgdGhpcyBwb2ludC4gRG8gbm90IHRvdWNoIGByZXF1ZXN0ZWRTY2FsZWANCiAgICAgICAgICAgIC8vIGV2ZXIgYWZ0ZXIgdGhpcyBwb2ludC4NCiAgICAgICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gTWF0aC5jZWlsKHNjcmF0Y2hXaWR0aCAqIHJlcXVlc3RlZFNjYWxlKTsNCiAgICAgICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IE1hdGguY2VpbChzY3JhdGNoSGVpZ2h0ICogcmVxdWVzdGVkU2NhbGUpOw0KICAgICAgICAgICAgdGhpcy5jdHguc2NhbGUocmVxdWVzdGVkU2NhbGUsIHJlcXVlc3RlZFNjYWxlKTsNCg0KICAgICAgICAgICAgY29uc3QgcmFpbmJvd09mZnNldCA9IHRoaXMuaXNSYWluYm93ID8gKGdsb2JhbEZyYW1lVGltZSAtIHRoaXMucmFpbmJvd1N0YXJ0VGltZSkgLyBSQUlOQk9XX1RJTUVfUEVSIDogMDsNCiAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29sb3I7DQogICAgICAgICAgICB0aGlzLmN0eC5mb250ID0gdGhpcy5fZ2V0Rm9udFN0eWxlKCk7DQogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGluZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBjb25zdCBsaW5lID0gdGhpcy5saW5lc1tpXTsNCiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gbGluZS50ZXh0Ow0KICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVXaWR0aCA9IGxpbmUud2lkdGg7DQoNCiAgICAgICAgICAgICAgICBsZXQgeE9mZnNldCA9IDA7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuYWxpZ24gPT09IEFMSUdOX0xFRlQpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gYWxyZWFkeSBjb3JyZWN0DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmFsaWduID09PSBBTElHTl9DRU5URVIpIHsNCiAgICAgICAgICAgICAgICAgICAgeE9mZnNldCA9ICh0aGlzLndyYXBXaWR0aCAtIGxpbmVXaWR0aCkgLyAyOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHhPZmZzZXQgPSB0aGlzLndyYXBXaWR0aCAtIGxpbmVXaWR0aDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1JhaW5ib3cpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JhZGllbnQgPSB0aGlzLmN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCh4T2Zmc2V0LCAwLCB4T2Zmc2V0ICsgbGluZVdpZHRoLCAwKTsNCiAgICAgICAgICAgICAgICAgICAgYWRkUmFpbmJvd1N0b3BzKGdyYWRpZW50LCByYWluYm93T2Zmc2V0KTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gZ3JhZGllbnQ7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gVE9ETzogc29tZXRoaW5nIGhlcmUgaXMgd3JvbmcNCiAgICAgICAgICAgICAgICB0aGlzLmN0eC5maWxsVGV4dCgNCiAgICAgICAgICAgICAgICAgICAgdGV4dCwNCiAgICAgICAgICAgICAgICAgICAgeE9mZnNldCwNCiAgICAgICAgICAgICAgICAgICAgdGhpcy52ZXJ0aWNhbFBhZGRpbmcgKyBpICogdGhpcy5saW5lSGVpZ2h0ICsgdGhpcy5iYXNlRm9udFNpemUNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoIXRoaXMuX3RleHR1cmUpIHsNCiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gdHdnbCBub3QgdHlwZWQgeWV0DQogICAgICAgICAgICAgICAgdGhpcy5fdGV4dHVyZSA9IHR3Z2wuY3JlYXRlVGV4dHVyZShnbCwgew0KICAgICAgICAgICAgICAgICAgICBhdXRvOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgd3JhcDogZ2wuQ0xBTVBfVE9fRURHRQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5fc2V0VGV4dHVyZSh0aGlzLmNhbnZhcyk7DQogICAgICAgIH0NCg0KICAgICAgICBfaW52YWxpZGF0ZVRleHR1cmUoKSB7DQogICAgICAgICAgICB0aGlzLl90ZXh0dXJlRGlydHkgPSB0cnVlOw0KICAgICAgICAgICAgdGhpcy5fcmVuZGVyVGltZSA9IDA7DQogICAgICAgICAgICB0aGlzLmVtaXRXYXNBbHRlcmVkKCk7DQogICAgICAgIH0NCg0KICAgICAgICBfaW52YWxpZGF0ZVRleHQoKSB7DQogICAgICAgICAgICB0aGlzLl90ZXh0RGlydHkgPSB0cnVlOw0KICAgICAgICAgICAgdGhpcy5fdGV4dHVyZURpcnR5ID0gdHJ1ZTsNCiAgICAgICAgICAgIHRoaXMuX3JlZmxvd1RpbWUgPSAwOw0KICAgICAgICAgICAgdGhpcy5lbWl0V2FzQWx0ZXJlZCgpOw0KICAgICAgICB9DQoNCiAgICAgICAgc2V0VGV4dCh0ZXh0KSB7DQogICAgICAgICAgICBpZiAodGV4dCAhPT0gdGhpcy50ZXh0KSB7DQogICAgICAgICAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsNCiAgICAgICAgICAgICAgICB0aGlzLl9pbnZhbGlkYXRlVGV4dCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgc2V0Q29sb3IoY29sb3IpIHsNCiAgICAgICAgICAgIGlmIChjb2xvciAhPT0gdGhpcy5jb2xvcikgew0KICAgICAgICAgICAgICAgIHRoaXMuY29sb3IgPSBjb2xvcjsNCiAgICAgICAgICAgICAgICB0aGlzLl9pbnZhbGlkYXRlVGV4dHVyZSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgc2V0QWxpZ24oYWxpZ24pIHsNCiAgICAgICAgICAgIGlmIChhbGlnbiAhPT0gdGhpcy5hbGlnbikgew0KICAgICAgICAgICAgICAgIHRoaXMuYWxpZ24gPSBhbGlnbjsNCiAgICAgICAgICAgICAgICB0aGlzLl9pbnZhbGlkYXRlVGV4dHVyZSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgc2V0V2lkdGgod2lkdGgpIHsNCiAgICAgICAgICAgIGlmICh3aWR0aCAhPT0gdGhpcy50ZXh0V2lkdGgpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnRleHRXaWR0aCA9IHdpZHRoOw0KICAgICAgICAgICAgICAgIHRoaXMuX2ludmFsaWRhdGVUZXh0KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBzZXRGb250RmFtaWx5KGZvbnQpIHsNCiAgICAgICAgICAgIGlmIChmb250ICE9PSB0aGlzLmZvbnRGYW1pbHkpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmZvbnRGYW1pbHkgPSBmb250Ow0KICAgICAgICAgICAgICAgIHRoaXMuX2ludmFsaWRhdGVUZXh0KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBnZXRGb250RmFtaWx5KCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9udEZhbWlseTsNCiAgICAgICAgfQ0KDQogICAgICAgIGdldENvbG9yKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29sb3I7DQogICAgICAgIH0NCg0KICAgICAgICBnZXRXaWR0aCgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLnRleHRXaWR0aDsNCiAgICAgICAgfQ0KDQogICAgICAgIF9vbmVBbmltYXRpb25BdEFUaW1lKG5ld0NhbGxiYWNrKSB7DQogICAgICAgICAgICB0aGlzLmNhbmNlbEFuaW1hdGlvbigpOw0KICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZU9uZ29pbmdBbmltYXRpb24gPSAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZU9uZ29pbmdBbmltYXRpb24gPSBudWxsOw0KICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7DQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICBuZXdDYWxsYmFjayh0aGlzLnJlc29sdmVPbmdvaW5nQW5pbWF0aW9uKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQoNCiAgICAgICAgc3RhcnRUeXBlQW5pbWF0aW9uKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29uZUFuaW1hdGlvbkF0QVRpbWUocmVzb2x2ZSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gdGhpcy50ZXh0Ow0KICAgICAgICAgICAgICAgIGxldCBpID0gMTsNCiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGUgPSAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VGV4dChvcmlnaW5hbFRleHQuc3Vic3RyaW5nKDAsIGkpKTsNCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIHVwZGF0ZSgpOw0KDQogICAgICAgICAgICAgICAgdGhpcy50eXBlQW5pbWF0aW9uSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGkrKzsNCiAgICAgICAgICAgICAgICAgICAgdXBkYXRlKCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChpID49IG9yaWdpbmFsVGV4dC5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50eXBlQW5pbWF0aW9uSW50ZXJ2YWwpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwgKHR5cGVTcGVlZCA9PSAwID8gMCA6ICh0eXBlU3BlZWQgPT0gLTEgPyBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgOiBUWVBFX0RFTEFZIC8gdHlwZVNwZWVkKSkpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCg0KICAgICAgICBzdGFydFR5cGVBbmltYXRpb25fVElDSyhUSUNLKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5fb25lQW5pbWF0aW9uQXRBVGltZShyZXNvbHZlID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbFRleHQgPSB0aGlzLnRleHQ7DQogICAgICAgICAgICAgICAgbGV0IGkgPSAxOw0KICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZSA9ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUZXh0KG9yaWdpbmFsVGV4dC5zdWJzdHJpbmcoMCwgaSkpOw0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgdXBkYXRlKCk7DQoNCiAgICAgICAgICAgICAgICB0aGlzLnR5cGVBbmltYXRpb25JbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaSsrOw0KICAgICAgICAgICAgICAgICAgICB1cGRhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPj0gb3JpZ2luYWxUZXh0Lmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnR5cGVBbmltYXRpb25JbnRlcnZhbCk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9LCAodHlwZVNwZWVkID09IDAgPyAwIDogKHR5cGVTcGVlZCA9PSAtMSA/IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSA6IFRJQ0sgLyB0eXBlU3BlZWQpKSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQogICAgICAgIHN0YXJ0UmFpbmJvd0FuaW1hdGlvbigpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vbmVBbmltYXRpb25BdEFUaW1lKHJlc29sdmUgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuaXNSYWluYm93ID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB0aGlzLnJhaW5ib3dTdGFydFRpbWUgPSBEYXRlLm5vdygpOw0KICAgICAgICAgICAgICAgIHRoaXMuX2ludmFsaWRhdGVUZXh0dXJlKCk7DQogICAgICAgICAgICAgICAgdGhpcy5yYWluYm93VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmFpbmJvdyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuX2ludmFsaWRhdGVUZXh0dXJlKCk7DQogICAgICAgICAgICAgICAgfSwgUkFJTkJPV19EVVJBVElPTik7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQogICAgICAgIHN0YXJ0Wm9vbUFuaW1hdGlvbigpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vbmVBbmltYXRpb25BdEFUaW1lKHJlc29sdmUgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuaXNab29taW5nID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB0aGlzLnpvb21TdGFydFRpbWUgPSBEYXRlLm5vdygpOw0KICAgICAgICAgICAgICAgIHRoaXMuX2ludmFsaWRhdGVUZXh0KCk7DQogICAgICAgICAgICAgICAgdGhpcy56b29tVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmlzWm9vbWluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuX2ludmFsaWRhdGVUZXh0KCk7DQogICAgICAgICAgICAgICAgfSwgWk9PTV9EVVJBVElPTik7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQogICAgICAgIGNhbmNlbEFuaW1hdGlvbigpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLnJlc29sdmVPbmdvaW5nQW5pbWF0aW9uKSB7DQogICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlT25nb2luZ0FuaW1hdGlvbigpOw0KICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZU9uZ29pbmdBbmltYXRpb24gPSBudWxsOw0KDQogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnR5cGVBbmltYXRpb25JbnRlcnZhbCk7DQoNCiAgICAgICAgICAgICAgICB0aGlzLmlzUmFpbmJvdyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJhaW5ib3dUaW1lb3V0KTsNCg0KICAgICAgICAgICAgICAgIHRoaXMuaXNab29taW5nID0gZmFsc2U7DQogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuem9vbVRpbWVvdXQpOw0KDQogICAgICAgICAgICAgICAgLy8gVE9ETzogc29tZXRpbWVzIHdlIG9ubHkgbmVlZCB0byBpbnZhbGlkYXRlIHRoZSB0ZXh0dXJlIGF0IHRoaXMgcG9pbnQNCiAgICAgICAgICAgICAgICB0aGlzLl9pbnZhbGlkYXRlVGV4dCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gUGFydCBvZiBTa2luIEFQSQ0KICAgICAgICB1cGRhdGVTaWxob3VldHRlKHNjYWxlKSB7DQogICAgICAgICAgICB0aGlzLmdldFRleHR1cmUoc2NhbGUpOw0KICAgICAgICAgICAgdGhpcy5fc2lsaG91ZXR0ZS51bmxhenkoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFBhcnQgb2YgU2tpbiBBUEkNCiAgICAgICAgZ2V0VGV4dHVyZShzY2FsZSkgew0KICAgICAgICAgICAgY29uc3QgTUFYX1NDQUxFID0gMTA7DQogICAgICAgICAgICBjb25zdCB1cHBlclNjYWxlID0gc2NhbGUgPyBNYXRoLm1heChNYXRoLmFicyhzY2FsZVswXSksIE1hdGguYWJzKHNjYWxlWzFdKSkgOiAxMDA7DQogICAgICAgICAgICBjb25zdCBjYWxjdWxhdGVkU2NhbGUgPSBNYXRoLm1pbihNQVhfU0NBTEUsIHVwcGVyU2NhbGUgLyAxMDApOw0KDQogICAgICAgICAgICBpZiAodGhpcy5fbmVlZHNSZWZsb3coKSkgew0KICAgICAgICAgICAgICAgIHRoaXMuX3JlZmxvd1RleHQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICB0aGlzLl90ZXh0dXJlRGlydHkgfHwNCiAgICAgICAgICAgICAgICAodGhpcy5pc1JhaW5ib3cgJiYgdGhpcy5fcmVuZGVyVGltZSAhPT0gZ2xvYmFsRnJhbWVUaW1lKSB8fA0KICAgICAgICAgICAgICAgIGNhbGN1bGF0ZWRTY2FsZSAhPT0gdGhpcy5fcmVuZGVyZWRBdFNjYWxlDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJBdFNjYWxlKGNhbGN1bGF0ZWRTY2FsZSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiB0aGlzLl90ZXh0dXJlOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICogTm90ZSB0aGF0IHRoZSByZXR1cm5lZCBza2luIGlzIG9ubHkgdXNhYmxlIGJ5IHRoZSBnaXZlbiB0YXJnZXQuIFRoaW5ncyB3aWxsIGJyZWFrIGlmIGFub3RoZXINCiAgICAgKiB0YXJnZXQgdHJpZXMgdG8gdXNlIGl0Lg0KICAgICAqIEBwYXJhbSB7Vk0uVGFyZ2V0fSB0YXJnZXQNCiAgICAgKiBAcmV0dXJucyB7VGV4dENvc3R1bWVTa2lufQ0KICAgICAqLw0KICAgIGNvbnN0IGNyZWF0ZVRleHRDb3N0dW1lU2tpbiA9ICh0YXJnZXQpID0+IHsNCiAgICAgICAgY29uc3QgZHJhd2FibGUgPSByZW5kZXJlci5fYWxsRHJhd2FibGVzW3RhcmdldC5kcmF3YWJsZUlEXTsNCiAgICAgICAgY29uc3QgaWQgPSByZW5kZXJlci5fbmV4dFNraW5JZCsrOw0KICAgICAgICBjb25zdCBza2luID0gbmV3IFRleHRDb3N0dW1lU2tpbihpZCwgZHJhd2FibGUpOw0KICAgICAgICByZW5kZXJlci5fYWxsU2tpbnNbaWRdID0gc2tpbjsNCiAgICAgICAgcmV0dXJuIHNraW47DQogICAgfTsNCg0KICAgIHZtLnJ1bnRpbWUub24oJ0JFRk9SRV9FWEVDVVRFJywgKCkgPT4gew0KICAgICAgICBnbG9iYWxGcmFtZVRpbWUgPSBEYXRlLm5vdygpOw0KDQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVuZGVyZXIuX2FsbFNraW5zLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBjb25zdCBza2luID0gcmVuZGVyZXIuX2FsbFNraW5zW2ldOw0KICAgICAgICAgICAgaWYgKHNraW4gaW5zdGFuY2VvZiBUZXh0Q29zdHVtZVNraW4gJiYgKHNraW4uaXNSYWluYm93IHx8IHNraW4uaXNab29taW5nKSkgew0KICAgICAgICAgICAgICAgIHNraW4uZW1pdFdhc0FsdGVyZWQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0pOw0KDQogICAgY2xhc3MgQW5pbWF0ZWRUZXh0IHsNCiAgICAgICAgY29uc3RydWN0b3IoKSB7DQogICAgICAgICAgICB2bS5ydW50aW1lLm9uKCdQUk9KRUNUX1NUQVJUJywgKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuX2hpZGVBbGxUZXh0KCk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgdm0ucnVudGltZS5vbignUFJPSkVDVF9TVE9QX0FMTCcsICgpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLl9oaWRlQWxsVGV4dCgpOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIHRhcmdldFdhc0NyZWF0ZWQgZG9lcyBub3Qgd29yayBiZWNhdXNlIGl0IHJ1bnMgYmVmb3JlIHRoZSBEcmF3YWJsZSBpcyBzZXQgdXANCiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IHRoaXM7DQogICAgICAgICAgICBjb25zdCBvcmlnaW5hbE1ha2VDbG9uZSA9IFJlbmRlcmVkVGFyZ2V0LnByb3RvdHlwZS5tYWtlQ2xvbmU7DQogICAgICAgICAgICBSZW5kZXJlZFRhcmdldC5wcm90b3R5cGUubWFrZUNsb25lID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIGNvbnN0IG5ld0Nsb25lID0gb3JpZ2luYWxNYWtlQ2xvbmUuY2FsbCh0aGlzKTsNCiAgICAgICAgICAgICAgICBpZiAoZXh0ZW5zaW9uLl9oYXNTdGF0ZSh0aGlzKSkgew0KICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBjcmVhdGVzIG11Y2ggdW5uZWVkZWQgc3RhdGUNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxTa2luID0gZXh0ZW5zaW9uLl9nZXRTdGF0ZSh0aGlzKS5za2luOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdTa2luID0gZXh0ZW5zaW9uLl9nZXRTdGF0ZShuZXdDbG9uZSkuc2tpbjsNCiAgICAgICAgICAgICAgICAgICAgbmV3U2tpbi5zZXRBbGlnbihvcmlnaW5hbFNraW4uYWxpZ24pOw0KICAgICAgICAgICAgICAgICAgICBuZXdTa2luLnNldENvbG9yKG9yaWdpbmFsU2tpbi5jb2xvcik7DQogICAgICAgICAgICAgICAgICAgIG5ld1NraW4uc2V0Rm9udEZhbWlseShvcmlnaW5hbFNraW4uZm9udEZhbWlseSk7DQogICAgICAgICAgICAgICAgICAgIG5ld1NraW4uc2V0V2lkdGgob3JpZ2luYWxTa2luLnRleHRXaWR0aCk7DQogICAgICAgICAgICAgICAgICAgIG5ld1NraW4uc2V0VGV4dChvcmlnaW5hbFNraW4udGV4dCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChyZW5kZXJlci5fYWxsRHJhd2FibGVzW3RoaXMuZHJhd2FibGVJRF0uc2tpbiBpbnN0YW5jZW9mIFRleHRDb3N0dW1lU2tpbikgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIudXBkYXRlRHJhd2FibGVTa2luSWQobmV3Q2xvbmUuZHJhd2FibGVJRCwgbmV3U2tpbi5pZCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ld0Nsb25lOw0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgdm0ucnVudGltZS5vbigndGFyZ2V0V2FzUmVtb3ZlZCcsICh0YXJnZXQpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5faGFzU3RhdGUodGFyZ2V0KSkgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX2dldFN0YXRlKHRhcmdldCk7DQogICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLmRlc3Ryb3lTa2luKHN0YXRlLnNraW4uaWQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQoNCiAgICAgICAgZ2V0SW5mbygpIHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgaWQ6ICd0ZXh0JywNCiAgICAgICAgICAgICAgICBuYW1lOiBTY3JhdGNoLnRyYW5zbGF0ZSh7IGlkOiAnbmFtZScsIGRlZmF1bHQ6ICdBbmltYXRlZCBUZXh0JyB9KSwNCiAgICAgICAgICAgICAgICBibG9ja0ljb25VUkk6IGJsb2NrSWNvblVSSSwNCiAgICAgICAgICAgICAgICBibG9ja3M6IFsNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgb3Bjb2RlOiAnc2V0VGV4dCcsDQogICAgICAgICAgICAgICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSh7IGlkOiAnc2V0VGV4dCcsIGRlZmF1bHQ6ICdzaG93IHRleHQgW1RFWFRdJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRFWFQ6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IFNjcmF0Y2gudHJhbnNsYXRlKHsgaWQ6ICdzZXRUZXh0X2RlZmF1bHRWYWx1ZScsIGRlZmF1bHQ6ICdXZWxjb21lIHRvIG15IHByb2plY3QhJyB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgb3Bjb2RlOiAnYW5pbWF0ZVRleHQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoeyBpZDogJ2FuaW1hdGVUZXh0JywgZGVmYXVsdDogJ1tBTklNQVRFXSB0ZXh0IFtURVhUXScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBTklNQVRFOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudTogJ2FuaW1hdGUnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICdyYWluYm93Jw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVEVYVDogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogU2NyYXRjaC50cmFuc2xhdGUoeyBpZDogJ2FuaW1hdGVUZXh0X2RlZmF1bHRWYWx1ZScsIGRlZmF1bHQ6ICdIZXJlIHdlIGdvIScgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG9wY29kZTogJ2NsZWFyVGV4dCcsDQogICAgICAgICAgICAgICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSh7IGlkOiAnY2xlYXJUZXh0JywgZGVmYXVsdDogJ3Nob3cgc3ByaXQnIH0pLA0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAnLS0tJywNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgb3Bjb2RlOiAnc2V0Rm9udCcsDQogICAgICAgICAgICAgICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSh7IGlkOiAnc2V0Rm9udCcsIGRlZmF1bHQ6ICdzZXQgZm9udCB0byBbRk9OVF0nIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRk9OVDogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnU6ICdmb250Jw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgb3Bjb2RlOiAnc2V0Q29sb3InLA0KICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoeyBpZDogJ3NldENvbG9yJywgZGVmYXVsdDogJ3NldCB0ZXh0IGNvbG9yIHRvIFtDT0xPUl0nIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09MT1I6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuQ09MT1INCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG9wY29kZTogJ3NldFdpZHRoJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKHsgaWQ6ICdzZXRXaWR0aCcsIGRlZmF1bHQ6ICdzZXQgd2lkdGggdG8gW1dJRFRIXSBhbGlnbmVkIFtBTElHTl0nIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgV0lEVEg6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICcyMDAnDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBTElHTjogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnU6ICdhbGlnbicNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICctLS0nLA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBvcGNvZGU6ICd0ZXh0QWN0aXZlJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQk9PTEVBTiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKHsgaWQ6ICd0ZXh0QWN0aXZlJywgZGVmYXVsdDogJ2lzIHNob3dpbmcgdGV4dCcgfSksDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG9wY29kZTogJ2dldFRleHRBdHRyaWJ1dGUnLA0KICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKHsgaWQ6ICdnZXRUZXh0QXR0cmlidXRlJywgZGVmYXVsdDogJ3RleHQgW0FUVFJJQlVURV0nIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQVRUUklCVVRFOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudTogJ2F0dHJpYnV0ZScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZU1vbml0b3I6IHRydWUNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgJy0tLScsDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG9wY29kZTogJ2FuaW1hdGVUZXh0QWR2JywNCiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKHsgaWQ6ICdhbmltYXRlVGV4dEFkdicsIGRlZmF1bHQ6ICd0eXBlIHRleHQgW1RFWFRdICwgZXZlcnkgW1RJQ0tdIG1zIGEgbGV0dGVyJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRFWFQ6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IFNjcmF0Y2gudHJhbnNsYXRlKHsgaWQ6ICdhbmltYXRlVGV4dF9kZWZhdWx0VmFsdWUnLCBkZWZhdWx0OiAnSGVyZSB3ZSBnbyEnIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUSUNLOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiA2MA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgb3Bjb2RlOiAnc2V0QW5pbWF0aW9uU3BlZWQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoeyBpZDogJ2FuaW1hdGVUZXh0U3BlZWQnLCBkZWZhdWx0OiAnc2V0IHR5cGUgc3BlZWQgdG8gW1NQRUVEXScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTUEVFRDogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnU6ICdzcGVlZCcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAnLS0tJywNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgb3Bjb2RlOiAnc2V0Rm9udFRvJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKHsgaWQ6ICdzZXRGb250JywgZGVmYXVsdDogJ3NldCBmb250IHRvIFtGT05UXScgfSksDQogICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGT05UOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAnQXJpYWwnDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIF0sDQogICAgICAgICAgICAgICAgbWVudXM6IHsNCiAgICAgICAgICAgICAgICAgICAgLy8gVGhlc2UgYWxsIG5lZWQgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlIGZvciBwYXJpdHkgd2l0aCB0aGUgU2NyYXRjaCBMYWJzIHZlcnNpb24uDQogICAgICAgICAgICAgICAgICAgIGFuaW1hdGU6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdFJlcG9ydGVyczogMSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBbDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSh7IGlkOiAndHlwZScsIGRlZmF1bHQ6ICd0eXBlJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICd0eXBlJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSh7IGlkOiAncmFpbmJvdycsIGRlZmF1bHQ6ICdyYWluYm93JyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdyYWluYm93Jw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSh7IGlkOiAnem9vbScsIGRlZmF1bHQ6ICd6b29tJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICd6b29tJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBdDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGZvbnQ6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdFJlcG9ydGVyczogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogWw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLk5BVElWRV9GT05UUywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKHsgaWQ6ICdyYW5kb20nLCBkZWZhdWx0OiAncmFuZG9tIGZvbnQnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ1JhbmRvbScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBdDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGFsaWduOiB7DQogICAgICAgICAgICAgICAgICAgICAgICBhY2NlcHRSZXBvcnRlcnM6IDEsDQogICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogWw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoeyBpZDogJ2xlZnQnLCBkZWZhdWx0OiAnbGVmdCcgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnbGVmdCcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoeyBpZDogJ2NlbnRlcicsIGRlZmF1bHQ6ICdjZW50ZXInIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ2NlbnRlcicNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoeyBpZDogJ3JpZ2h0JywgZGVmYXVsdDogJ3JpZ2h0JyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdyaWdodCcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBdDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZTogew0KICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXB0UmVwb3J0ZXJzOiAxLA0KICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IFsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKHsgaWQ6ICdmb250JywgZGVmYXVsdDogJ2ZvbnQnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ2ZvbnQnDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKHsgaWQ6ICdjb2xvcicsIGRlZmF1bHQ6ICdjb2xvcicgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnY29sb3InDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKHsgaWQ6ICd3aWR0aCcsIGRlZmF1bHQ6ICd3aWR0aCcgfSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnd2lkdGgnDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgXQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBzcGVlZDogew0KICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXB0UmVwb3J0ZXJzOiAxLA0KICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IFsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICcxeCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnMScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJzEuNXgnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJzEuNScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJzJ4JywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICcyJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnM3gnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJzMnDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICc1eCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnNScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJzEweCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnMTAnDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKHsgaWQ6ICdpbmYnLCBkZWZhdWx0OiAnaW5mJyB9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICcwJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSh7IGlkOiAncGF1c2UnLCBkZWZhdWx0OiAncGF1c2UnIH0pLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJy0xJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBdDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIEBwYXJhbSB7Vk0uVGFyZ2V0fSB0YXJnZXQNCiAgICAgICAgICogQHJldHVybnMge1RleHRTdGF0ZX0NCiAgICAgICAgICovDQogICAgICAgIF9nZXRTdGF0ZSh0YXJnZXQpIHsNCiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGFyZ2V0W0NVU1RPTV9TVEFURV9LRVldOw0KICAgICAgICAgICAgaWYgKCFzdGF0ZSkgew0KICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7VGV4dFN0YXRlfSAqLw0KICAgICAgICAgICAgICAgIGNvbnN0IG5ld1N0YXRlID0gew0KICAgICAgICAgICAgICAgICAgICBza2luOiBjcmVhdGVUZXh0Q29zdHVtZVNraW4odGFyZ2V0KQ0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgdGFyZ2V0W0NVU1RPTV9TVEFURV9LRVldID0gbmV3U3RhdGU7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ld1N0YXRlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHN0YXRlOw0KICAgICAgICB9DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIEBwYXJhbSB7Vk0uVGFyZ2V0fSB0YXJnZXQNCiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59DQogICAgICAgICAqLw0KICAgICAgICBfaGFzU3RhdGUodGFyZ2V0KSB7DQogICAgICAgICAgICByZXR1cm4gISF0YXJnZXRbQ1VTVE9NX1NUQVRFX0tFWV07DQogICAgICAgIH0NCg0KICAgICAgICBfaGlkZUFsbFRleHQoKSB7DQogICAgICAgICAgICBmb3IgKGNvbnN0IHRhcmdldCBvZiB2bS5ydW50aW1lLnRhcmdldHMpIHsNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5faGFzU3RhdGUodGFyZ2V0KSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLl9oaWRlVGV4dCh0YXJnZXQsIHRoaXMuX2dldFN0YXRlKHRhcmdldCkpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBAcGFyYW0ge1ZNLlRhcmdldH0gdGFyZ2V0DQogICAgICAgICAqIEBwYXJhbSB7VGV4dFN0YXRlfSBzdGF0ZQ0KICAgICAgICAgKi8NCiAgICAgICAgX3JlbmRlclRleHQodGFyZ2V0LCBzdGF0ZSkgew0KICAgICAgICAgICAgc3RhdGUuc2tpbi5jYW5jZWxBbmltYXRpb24oKTsNCiAgICAgICAgICAgIHJlbmRlcmVyLnVwZGF0ZURyYXdhYmxlU2tpbklkKHRhcmdldC5kcmF3YWJsZUlELCBzdGF0ZS5za2luLmlkKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBAcGFyYW0ge1ZNLlRhcmdldH0gdGFyZ2V0DQogICAgICAgICAqIEBwYXJhbSB7VGV4dFN0YXRlfSBzdGF0ZQ0KICAgICAgICAgKi8NCiAgICAgICAgX2hpZGVUZXh0KHRhcmdldCwgc3RhdGUpIHsNCiAgICAgICAgICAgIHN0YXRlLnNraW4uY2FuY2VsQW5pbWF0aW9uKCk7DQogICAgICAgICAgICB0YXJnZXQuc2V0Q29zdHVtZSh0YXJnZXQuY3VycmVudENvc3R1bWUpOw0KICAgICAgICB9DQoNCiAgICAgICAgc2V0VGV4dCh7IFRFWFQgfSwgdXRpbCkgew0KICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9nZXRTdGF0ZSh1dGlsLnRhcmdldCk7DQogICAgICAgICAgICB0aGlzLl9yZW5kZXJUZXh0KHV0aWwudGFyZ2V0LCBzdGF0ZSk7DQogICAgICAgICAgICBzdGF0ZS5za2luLnNldFRleHQoU2NyYXRjaC5DYXN0LnRvU3RyaW5nKFRFWFQpKTsNCiAgICAgICAgICAgIC8vIFNjcmF0Y2ggZm9yY2VzIDEgZnJhbWUgZGVsYXkgYnkgcmV0dXJuaW5nIHByb21pc2UuIEkgdGhpbmsgdGhhdCdzIHNpbGx5Lg0KICAgICAgICAgICAgdXRpbC5ydW50aW1lLnJlcXVlc3RSZWRyYXcoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGFuaW1hdGVUZXh0KHsgQU5JTUFURSwgVEVYVCB9LCB1dGlsKSB7DQogICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX2dldFN0YXRlKHV0aWwudGFyZ2V0KTsNCiAgICAgICAgICAgIHRoaXMuX3JlbmRlclRleHQodXRpbC50YXJnZXQsIHN0YXRlKTsNCg0KICAgICAgICAgICAgc3RhdGUuc2tpbi5zZXRUZXh0KFNjcmF0Y2guQ2FzdC50b1N0cmluZyhURVhUKSk7DQogICAgICAgICAgICBzdGF0ZS5za2luLmNhbmNlbEFuaW1hdGlvbigpOw0KDQogICAgICAgICAgICBpZiAoQU5JTUFURSA9PT0gJ3R5cGUnKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlLnNraW4uc3RhcnRUeXBlQW5pbWF0aW9uKCk7DQogICAgICAgICAgICB9IGVsc2UgaWYgKEFOSU1BVEUgPT09ICdyYWluYm93Jykgew0KICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZS5za2luLnN0YXJ0UmFpbmJvd0FuaW1hdGlvbigpOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChBTklNQVRFID09PSAnem9vbScpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGUuc2tpbi5zdGFydFpvb21BbmltYXRpb24oKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gU2NyYXRjaCBkb2VzIG5vdGhpbmcgaGVyZQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgY2xlYXJUZXh0KGFyZ3MsIHV0aWwpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLl9oYXNTdGF0ZSh1dGlsLnRhcmdldCkpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX2dldFN0YXRlKHV0aWwudGFyZ2V0KTsNCiAgICAgICAgICAgICAgICB0aGlzLl9oaWRlVGV4dCh1dGlsLnRhcmdldCwgc3RhdGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gU2NyYXRjaCBmb3JjZXMgMSBmcmFtZSBkZWxheSBieSByZXR1cm5pbmcgcHJvbWlzZS4gSSB0aGluayB0aGF0J3Mgc2lsbHkuDQogICAgICAgICAgICB1dGlsLnJ1bnRpbWUucmVxdWVzdFJlZHJhdygpOw0KICAgICAgICB9DQoNCiAgICAgICAgc2V0Rm9udCh7IEZPTlQgfSwgdXRpbCkgew0KICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9nZXRTdGF0ZSh1dGlsLnRhcmdldCk7DQogICAgICAgICAgICBpZiAoRk9OVCA9PT0gJ1JhbmRvbScpIHsNCiAgICAgICAgICAgICAgICAvLyBSYW5kb20gZm9udCBhbHdheXMgc3dpdGNoZXMgdG8gYSBuZXcgZm9udCwgbmV2ZXIgdGhlIHNhbWUgb25lDQogICAgICAgICAgICAgICAgY29uc3QgcG9zc2libGVGb250cyA9IE5BVElWRV9GT05UUy5maWx0ZXIoaSA9PiBpICE9PSBzdGF0ZS5za2luLmZvbnRGYW1pbHkpOw0KICAgICAgICAgICAgICAgIHN0YXRlLnNraW4uc2V0Rm9udEZhbWlseShwb3NzaWJsZUZvbnRzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlRm9udHMubGVuZ3RoKV0pOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBzdGF0ZS5za2luLnNldEZvbnRGYW1pbHkoU2NyYXRjaC5DYXN0LnRvU3RyaW5nKEZPTlQpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHNldENvbG9yKHsgQ09MT1IgfSwgdXRpbCkgew0KICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9nZXRTdGF0ZSh1dGlsLnRhcmdldCk7DQogICAgICAgICAgICBzdGF0ZS5za2luLnNldENvbG9yKFNjcmF0Y2guQ2FzdC50b1N0cmluZyhDT0xPUikpOw0KICAgICAgICB9DQoNCiAgICAgICAgc2V0V2lkdGgoeyBXSURUSCwgQUxJR04gfSwgdXRpbCkgew0KICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9nZXRTdGF0ZSh1dGlsLnRhcmdldCk7DQoNCiAgICAgICAgICAgIGlmIChBTElHTiA9PT0gJ2NlbnRlcicpIHsNCiAgICAgICAgICAgICAgICBzdGF0ZS5za2luLnNldEFsaWduKEFMSUdOX0NFTlRFUik7DQogICAgICAgICAgICB9IGVsc2UgaWYgKEFMSUdOID09PSAncmlnaHQnKSB7DQogICAgICAgICAgICAgICAgc3RhdGUuc2tpbi5zZXRBbGlnbihBTElHTl9SSUdIVCk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIFNjcmF0Y2ggdHJlYXRzIHVua25vd24gdmFsdWVzIGFzIGxlZnQgYWxpZ25tZW50Lg0KICAgICAgICAgICAgICAgIHN0YXRlLnNraW4uc2V0QWxpZ24oQUxJR05fTEVGVCk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHN0YXRlLnNraW4uc2V0V2lkdGgoU2NyYXRjaC5DYXN0LnRvTnVtYmVyKFdJRFRIKSk7DQogICAgICAgIH0NCg0KICAgICAgICB0ZXh0QWN0aXZlKGFyZ3MsIHV0aWwpIHsNCiAgICAgICAgICAgIGNvbnN0IGRyYXdhYmxlSUQgPSB1dGlsLnRhcmdldC5kcmF3YWJsZUlEOw0KICAgICAgICAgICAgY29uc3Qgc2tpbiA9IHJlbmRlcmVyLl9hbGxEcmF3YWJsZXNbZHJhd2FibGVJRF0uc2tpbjsNCiAgICAgICAgICAgIHJldHVybiBza2luIGluc3RhbmNlb2YgVGV4dENvc3R1bWVTa2luOw0KICAgICAgICB9DQoNCiAgICAgICAgZ2V0VGV4dEF0dHJpYnV0ZShhcmdzLCB1dGlsKSB7DQogICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX2dldFN0YXRlKHV0aWwudGFyZ2V0KTsNCiAgICAgICAgICAgIGNvbnN0IGF0dHJpYiA9IGFyZ3MuQVRUUklCVVRFOw0KICAgICAgICAgICAgaWYgKGF0dHJpYiA9PT0gJ2ZvbnQnKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlLnNraW4uZ2V0Rm9udEZhbWlseSgpOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChhdHRyaWIgPT09ICdjb2xvcicpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGUuc2tpbi5nZXRDb2xvcigpOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChhdHRyaWIgPT09ICd3aWR0aCcpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGUuc2tpbi5nZXRXaWR0aCgpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyBzaG91bGQgbmV2ZXIgaGFwcGVuDQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgYW5pbWF0ZVRleHRBZHYoeyBUSUNLLCBURVhUIH0sIHV0aWwpIHsNCiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fZ2V0U3RhdGUodXRpbC50YXJnZXQpOw0KICAgICAgICAgICAgdGhpcy5fcmVuZGVyVGV4dCh1dGlsLnRhcmdldCwgc3RhdGUpOw0KDQogICAgICAgICAgICBzdGF0ZS5za2luLnNldFRleHQoU2NyYXRjaC5DYXN0LnRvU3RyaW5nKFRFWFQpKTsNCiAgICAgICAgICAgIHN0YXRlLnNraW4uY2FuY2VsQW5pbWF0aW9uKCk7DQoNCiAgICAgICAgICAgIHJldHVybiBzdGF0ZS5za2luLnN0YXJ0VHlwZUFuaW1hdGlvbl9USUNLKFRJQ0spOw0KICAgICAgICB9DQoNCiAgICAgICAgc2V0QW5pbWF0aW9uU3BlZWQoeyBTUEVFRCB9KSB7DQogICAgICAgICAgICB0eXBlU3BlZWQgPSBwYXJzZUZsb2F0KFNQRUVEKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHNldEZvbnRUbyh7IEZPTlQgfSwgdXRpbCkgew0KICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9nZXRTdGF0ZSh1dGlsLnRhcmdldCk7DQogICAgICAgICAgICBpZiAoRk9OVCA9PT0gJ1JhbmRvbScpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBwb3NzaWJsZUZvbnRzID0gTkFUSVZFX0ZPTlRTLmZpbHRlcihpID0+IGkgIT09IHN0YXRlLnNraW4uZm9udEZhbWlseSk7DQogICAgICAgICAgICAgICAgc3RhdGUuc2tpbi5zZXRGb250RmFtaWx5KHBvc3NpYmxlRm9udHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcG9zc2libGVGb250cy5sZW5ndGgpXSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHN0YXRlLnNraW4uc2V0Rm9udEZhbWlseShTY3JhdGNoLkNhc3QudG9TdHJpbmcoRk9OVCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgU2NyYXRjaC5leHRlbnNpb25zLnJlZ2lzdGVyKG5ldyBBbmltYXRlZFRleHQoKSk7DQp9KShTY3JhdGNoKTs=';

import EvalIconURL from './eval/evalmain.png';

import ListIconURL from './list/list.svg';
import lazyaIconURL from './lazyload/lazyload.svg';
import rtimejsIconURL from './rtimejs/runtimemain.png';
import toolIconURL from './tool/tool.svg';
import OperationIconURL from './Operation/operations.png';

//import localIconURL from './local/local.png';

import musicIconURL from './music/music.png';
import musicInsetIconURL from './music/music-small.svg';

import penIconURL from './pen/pen.png';
import penInsetIconURL from './pen/pen-small.svg';

import videoSensingIconURL from './videoSensing/video-sensing.png';
import videoSensingInsetIconURL from './videoSensing/video-sensing-small.svg';

import text2speechIconURL from './text2speech/text2speech.png';
import text2speechInsetIconURL from './text2speech/text2speech-small.svg';

import translateIconURL from './translate/translate.png';
import translateInsetIconURL from './translate/translate-small.png';

import makeymakeyIconURL from './makeymakey/makeymakey.png';
import makeymakeyInsetIconURL from './makeymakey/makeymakey-small.svg';

import microbitIconURL from './microbit/microbit.png';
import microbitInsetIconURL from './microbit/microbit-small.svg';
import microbitConnectionIconURL from './microbit/microbit-illustration.svg';
import microbitConnectionSmallIconURL from './microbit/microbit-small.svg';

import ev3IconURL from './ev3/ev3.png';
import ev3InsetIconURL from './ev3/ev3-small.svg';
import ev3ConnectionIconURL from './ev3/ev3-hub-illustration.svg';
import ev3ConnectionSmallIconURL from './ev3/ev3-small.svg';

import wedo2IconURL from './wedo2/wedo.png'; // TODO: Rename file names to match variable/prop names?
import wedo2InsetIconURL from './wedo2/wedo-small.svg';
import wedo2ConnectionIconURL from './wedo2/wedo-illustration.svg';
import wedo2ConnectionSmallIconURL from './wedo2/wedo-small.svg';
import wedo2ConnectionTipIconURL from './wedo2/wedo-button-illustration.svg';

import boostIconURL from './boost/boost.png';
import boostInsetIconURL from './boost/boost-small.svg';
import boostConnectionIconURL from './boost/boost-illustration.svg';
import boostConnectionSmallIconURL from './boost/boost-small.svg';
import boostConnectionTipIconURL from './boost/boost-button-illustration.svg';

import gdxforIconURL from './gdxfor/gdxfor.png';
import gdxforInsetIconURL from './gdxfor/gdxfor-small.svg';
import gdxforConnectionIconURL from './gdxfor/gdxfor-illustration.svg';
import gdxforConnectionSmallIconURL from './gdxfor/gdxfor-small.svg';

import twIcon from './tw/tw.svg';

import customExtensionIcon from './custom/custom.svg';

import galleryIcon from './gallery/gallery.svg';
import unknownIcon from './gallery/unknown.svg';
import animatedTextIcon from './gallery/animated-text.svg';
import stretchIcon from './gallery/stretch.svg';
import gamepadIcon from './gallery/gamepad.svg';
import cursorIcon from './gallery/cursor.svg';
import fileIcon from './gallery/file.svg';
import penplusIcon from './gallery/penplus.svg';
import pointerlockIcon from './gallery/pointerlock.svg';
import runtimeOptionsIcon from './gallery/runtime-options.svg';
import utilitiesIcon from './gallery/utilities.svg';
import sensingPlusIcon from './gallery/sensingplus.svg';
import clonesPlusIcon from './gallery/clonesplus.svg';
import clippingBlendingIcon from './gallery/clippingblending.svg';
import regexIcon from './gallery/regex.svg';
import bitwiseIcon from './gallery/bitwise.svg';
import textIcon from './gallery/text.svg';
import fetchIcon from './gallery/fetch.svg';
import box2dIcon from './gallery/box2d.svg';

const galleryItem = object => ({
    ...object,
    tags: ['tw'],
    incompatibleWithScratch: true,
    featured: true
});

export default [
    {
        name: 'Eval',
        extensionId: 'eval',
        collaborator: '',
        iconURL: EvalIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Do Javascript."
                id="rc.rxblocks.eval.discribe"
            />
        ),
        tags: ['rcodenow'],
        featured: true
    },
    {
        name: (
            <FormattedMessage
                defaultMessage="Music"
                description="Name for the 'Music' extension"
                id="gui.extension.music.name"
            />
        ),
        extensionId: 'music',
        iconURL: musicIconURL,
        insetIconURL: musicInsetIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Play instruments and drums."
                description="Description for the 'Music' extension"
                id="gui.extension.music.description"
            />
        ),
        tags: ['scratch'],
        featured: true
    },
    {
        name: (
            <FormattedMessage
                defaultMessage="Pen"
                description="Name for the 'Pen' extension"
                id="gui.extension.pen.name"
            />
        ),
        extensionId: 'pen',
        iconURL: penIconURL,
        insetIconURL: penInsetIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Draw with your sprites."
                description="Description for the 'Pen' extension"
                id="gui.extension.pen.description"
            />
        ),
        tags: ['scratch'],
        featured: true
    },
    {
        name: (
            <FormattedMessage
                defaultMessage="Animated Text"
                id="rc.rxblocks.anitext.name"
            />
        ),
        extensionId: 'text',
        collaborator: '',
        iconURL: anitextIconURL,
        insetIconURL: anitextInsetIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Bring words to life."
                id="rc.rxblocks.anitext.describe"
            />
        ),
        tags: ['rcodenow'],
        featured: true,
    },
    {
        name: (
            <FormattedMessage
                defaultMessage="Video Sensing"
                description="Name for the 'Video Sensing' extension"
                id="gui.extension.videosensing.name"
            />
        ),
        extensionId: 'videoSensing',
        iconURL: videoSensingIconURL,
        insetIconURL: videoSensingInsetIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Sense motion with the camera."
                description="Description for the 'Video Sensing' extension"
                id="gui.extension.videosensing.description"
            />
        ),
        tags: ['scratch'],
        featured: true
    },
    {
        name: (
            <FormattedMessage
            id= 'rc.rxblocks.list.name'
            defaultMessage= 'Unleash the shackles'
            />
        ),
        extensionId: 'list',
        collaborator: '',
        iconURL: ListIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Remove restrictions on lists and variables."
                id="rc.rxblocks.list.describe"
            />
        ),
        tags: ['rcodenow'],
        featured: true
    },
    {
        name: 'rxFS',
        extensionId: 'rxfs',
        collaborator: '',
        iconURL: rxFSIconURL,
        insetIconURL: rxFSInsetIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Blocks for interacting with a virtual in-memory filesystem."
                id="rc.rxblocks.rxfs.describe"
            />
        ),
        tags: ['rcodenow'],
        featured: true
    },
    {
        name: (
            <FormattedMessage
                defaultMessage="Iframe"
                id="rc.rxblocks.iframe.name"
            />
        ),
        extensionId: 'iframe',
        collaborator: '',
        iconURL: iframeIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Blocks to place and move aroundframes that contain HTML content orwebsites."
                id="rc.rxblocks.iframe.describe"
            />
        ),
        tags: ['rcodenow'],
        featured: true,
        internetConnectionRequired: true
    },
    {
        name: (
            <FormattedMessage
                defaultMessage="Message"
                id="rc.rxblocks.message.name"
            />
        ),
        extensionId: 'message',
        collaborator: '',
        iconURL: messageIconURL,
        description: (
            <FormattedMessage
                defaultMessage="For logging and variable utilization."
                id="rc.rxblocks.message.describe"
            />
        ),
        tags: ['rcodenow'],
        featured: true,
    },
    {
        name: (
            <FormattedMessage
                defaultMessage="Import/Setting"
                id="rc.rxblocks.runtime.name"
            />
        ),
        extensionId: 'rtimejs',
        collaborator: '',
        iconURL: rtimejsIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Some blocks for importing and setting with runtime."
                id="rc.rxblocks.runtime.describe"
            />
        ),
        tags: ['rcodenow'],
        featured: true,
    },
    {
        name: (
            <FormattedMessage
                defaultMessage="lazyAudio"
                id="rc.rxblocks.lazya.name"
            />
        ),
        extensionId: 'lazyAudio',
        collaborator: '',
        iconURL: lazyaIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Play music from URLs."
                id="rc.rxblocks.lazya.describe"
            />
        ),
        tags: ['rcodenow'],
        featured: true,
    },
    {
        name: (
            <FormattedMessage
                defaultMessage="Tool"
                id="rc.rxblocks.tool.name"
            />
        ),
        extensionId: 'tool',
        iconURL: toolIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Some blocks for debug."
                id="rc.rxblocks.tool.describe"
            />
        ),
        tags: ['rcodenow'],
        featured: true,
    },
    {
        name: (
            <FormattedMessage
                defaultMessage="Operation"
                id="be.Operation.Operation"
            />
        ),
        extensionId: 'Operation',
        iconURL: OperationIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Advanced operations, including string, computation, bitwise operations, two-dimensional graphic operations, etc."
                id="be.Operation.describe"
            />
        ),
        tags: ['rcodenow'],
        featured: true,
    },
    /*
    {
        name: (
            <FormattedMessage
                defaultMessage="Canvas"
                id="rc.canvas.name"
            />
        ),
        extensionId: 'canvas',
        collaborator: '',
        iconURL: canvasIconURL,
        insetIconURL: canvasInsetIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Extra drawing tools using an HTML Canvas. Works well when used withother extensions."
                id="rc.canvas.describe"
            />
        ),
        tags: ['rcodenow'],
        featured: true,
    },
    */
    {
        name: (
            <FormattedMessage
                defaultMessage="Text to Speech"
                description="Name for the Text to Speech extension"
                id="gui.extension.text2speech.name"
            />
        ),
        extensionId: 'text2speech',
        collaborator: 'Amazon Web Services',
        iconURL: text2speechIconURL,
        insetIconURL: text2speechInsetIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Make your projects talk."
                description="Description for the Text to speech extension"
                id="gui.extension.text2speech.description"
            />
        ),
        tags: ['scratch'],
        featured: true,
        internetConnectionRequired: true
    },
    {
        name: (
            <FormattedMessage
                defaultMessage="Translate"
                description="Name for the Translate extension"
                id="gui.extension.translate.name"
            />
        ),
        extensionId: 'translate',
        collaborator: 'Google',
        iconURL: translateIconURL,
        insetIconURL: translateInsetIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Translate text into many languages."
                description="Description for the Translate extension"
                id="gui.extension.translate.description"
            />
        ),
        tags: ['scratch'],
        featured: true,
        internetConnectionRequired: true
    },
    {
        name: 'Makey Makey',
        extensionId: 'makeymakey',
        collaborator: 'JoyLabz',
        iconURL: makeymakeyIconURL,
        insetIconURL: makeymakeyInsetIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Make anything into a key."
                description="Description for the 'Makey Makey' extension"
                id="gui.extension.makeymakey.description"
            />
        ),
        tags: ['scratch'],
        featured: true
    },
    {
        name: 'micro:bit',
        extensionId: 'microbit',
        collaborator: 'micro:bit',
        iconURL: microbitIconURL,
        insetIconURL: microbitInsetIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Connect your projects with the world."
                description="Description for the 'micro:bit' extension"
                id="gui.extension.microbit.description"
            />
        ),
        tags: ['scratch'],
        featured: true,
        disabled: false,
        bluetoothRequired: true,
        internetConnectionRequired: true,
        launchPeripheralConnectionFlow: true,
        useAutoScan: false,
        connectionIconURL: microbitConnectionIconURL,
        connectionSmallIconURL: microbitConnectionSmallIconURL,
        connectingMessage: (
            <FormattedMessage
                defaultMessage="Connecting"
                description="Message to help people connect to their micro:bit."
                id="gui.extension.microbit.connectingMessage"
            />
        ),
        helpLink: 'https://scratch.mit.edu/microbit'
    },
    {
        name: 'LEGO MINDSTORMS EV3',
        extensionId: 'ev3',
        collaborator: 'LEGO',
        iconURL: ev3IconURL,
        insetIconURL: ev3InsetIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Build interactive robots and more."
                description="Description for the 'LEGO MINDSTORMS EV3' extension"
                id="gui.extension.ev3.description"
            />
        ),
        tags: ['scratch'],
        featured: true,
        disabled: false,
        bluetoothRequired: true,
        internetConnectionRequired: true,
        launchPeripheralConnectionFlow: true,
        useAutoScan: false,
        connectionIconURL: ev3ConnectionIconURL,
        connectionSmallIconURL: ev3ConnectionSmallIconURL,
        connectingMessage: (
            <FormattedMessage
                defaultMessage="Connecting. Make sure the pin on your EV3 is set to 1234."
                description="Message to help people connect to their EV3. Must note the PIN should be 1234."
                id="gui.extension.ev3.connectingMessage"
            />
        ),
        helpLink: 'https://scratch.mit.edu/ev3'
    },
    {
        name: 'LEGO BOOST',
        extensionId: 'boost',
        collaborator: 'LEGO',
        iconURL: boostIconURL,
        insetIconURL: boostInsetIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Bring robotic creations to life."
                description="Description for the 'LEGO BOOST' extension"
                id="gui.extension.boost.description"
            />
        ),
        tags: ['scratch'],
        featured: true,
        disabled: false,
        bluetoothRequired: true,
        internetConnectionRequired: true,
        launchPeripheralConnectionFlow: true,
        useAutoScan: true,
        connectionIconURL: boostConnectionIconURL,
        connectionSmallIconURL: boostConnectionSmallIconURL,
        connectionTipIconURL: boostConnectionTipIconURL,
        connectingMessage: (
            <FormattedMessage
                defaultMessage="Connecting"
                description="Message to help people connect to their BOOST."
                id="gui.extension.boost.connectingMessage"
            />
        ),
        helpLink: 'https://scratch.mit.edu/boost'
    },
    {
        name: 'LEGO Education WeDo 2.0',
        extensionId: 'wedo2',
        collaborator: 'LEGO',
        iconURL: wedo2IconURL,
        insetIconURL: wedo2InsetIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Build with motors and sensors."
                description="Description for the 'LEGO WeDo 2.0' extension"
                id="gui.extension.wedo2.description"
            />
        ),
        tags: ['scratch'],
        featured: true,
        disabled: false,
        bluetoothRequired: true,
        internetConnectionRequired: true,
        launchPeripheralConnectionFlow: true,
        useAutoScan: true,
        connectionIconURL: wedo2ConnectionIconURL,
        connectionSmallIconURL: wedo2ConnectionSmallIconURL,
        connectionTipIconURL: wedo2ConnectionTipIconURL,
        connectingMessage: (
            <FormattedMessage
                defaultMessage="Connecting"
                description="Message to help people connect to their WeDo."
                id="gui.extension.wedo2.connectingMessage"
            />
        ),
        helpLink: 'https://scratch.mit.edu/wedo'
    },
    {
        name: 'Go Direct Force & Acceleration',
        extensionId: 'gdxfor',
        collaborator: 'Vernier',
        iconURL: gdxforIconURL,
        insetIconURL: gdxforInsetIconURL,
        description: (
            <FormattedMessage
                defaultMessage="Sense push, pull, motion, and spin."
                description="Description for the Vernier Go Direct Force and Acceleration sensor extension"
                id="gui.extension.gdxfor.description"
            />
        ),
        tags: ['scratch'],
        featured: true,
        disabled: false,
        bluetoothRequired: true,
        internetConnectionRequired: true,
        launchPeripheralConnectionFlow: true,
        useAutoScan: false,
        connectionIconURL: gdxforConnectionIconURL,
        connectionSmallIconURL: gdxforConnectionSmallIconURL,
        connectingMessage: (
            <FormattedMessage
                defaultMessage="Connecting"
                description="Message to help people connect to their force and acceleration sensor."
                id="gui.extension.gdxfor.connectingMessage"
            />
        ),
        helpLink: 'https://scratch.mit.edu/vernier'
    },
    {
        name: (
            <FormattedMessage
                defaultMessage="rCodenow Extension Gallery"
                description="Name of extensions.rCodenow.org in extension library"
                id="tw.extensionGallery.name"
            />
        ),
        href: 'https://extensions.rCodenow.org/',
        extensionId: '',
        iconURL: galleryIcon,
        description: (
            <FormattedMessage
                // eslint-disable-next-line max-len
                defaultMessage="We list many extensions here for convenience. You can find even more on extensions.rCodenow.org."
                description="Description of extensions.rCodenow.org in extension library"
                id="tw.extensionGallery.description"
            />
        ),
        tags: ['tw'],
        incompatibleWithScratch: true,
        featured: true
    },
    {
        name: (
            <FormattedMessage
                defaultMessage="rCodenow Blocks"
                description="Name of TW extension"
                id="tw.twExtension.name"
            />
        ),
        extensionId: 'tw',
        iconURL: twIcon,
        description: (
            <FormattedMessage
                defaultMessage="Weird new blocks."
                description="Description of TW extension"
                id="tw.twExtension.description"
            />
        ),
        incompatibleWithScratch: true,
        tags: ['tw'],
        featured: true
    },
    // Extensions loaded from URLs do not support localization, so unfortunately we will just leave English names here.
    galleryItem({
        name: 'Animated Text',
        // eslint-disable-next-line max-len
        description: 'An easy way to display and animate text. Compatible with Scratch Lab\'s Animated Text experiment.',
        extensionId: 'text',
        extensionURL: 'https://extensions.rCodenow.org/lab/text.js',
        iconURL: animatedTextIcon
    }),
    galleryItem({
        name: 'Stretch',
        description: 'Stretch sprites horizontally or vertically.',
        extensionId: 'stretch',
        extensionURL: 'https://extensions.rCodenow.org/stretch.js',
        iconURL: stretchIcon
    }),
    galleryItem({
        name: 'Gamepad',
        description: 'Directly access gamepads instead of just mapping buttons to keys.',
        extensionId: 'Gamepad',
        extensionURL: 'https://extensions.rCodenow.org/gamepad.js',
        iconURL: gamepadIcon
    }),
    galleryItem({
        name: 'Files',
        description: 'Read and download files.',
        extensionId: 'files',
        extensionURL: 'https://extensions.rCodenow.org/files.js',
        iconURL: fileIcon
    }),
    galleryItem({
        name: 'Pointerlock',
        // eslint-disable-next-line max-len
        description: 'Adds blocks for mouse locking. Mouse x & y blocks will report the change since the previous frame while the pointer is locked.',
        extensionId: 'pointerlock',
        extensionURL: 'https://extensions.rCodenow.org/pointerlock.js',
        iconURL: pointerlockIcon
    }),
    galleryItem({
        name: 'Mouse Cursor',
        description: 'Use custom cursors or hide the cursor. Also allows replacing the cursor with any costume image.',
        extensionId: 'MouseCursor',
        extensionURL: 'https://extensions.rCodenow.org/cursor.js',
        iconURL: cursorIcon
    }),
    galleryItem({
        name: 'Runtime Options',
        description: 'Get and modify turbo mode, framerate, interpolation, clone limit, stage size, and more.',
        extensionId: 'runtimeoptions',
        extensionURL: 'https://extensions.rCodenow.org/runtime-options.js',
        iconURL: runtimeOptionsIcon
    }),
    galleryItem({
        name: 'Clones Plus',
        description: 'Expansion of Scratch\'s clone features. Created by LukeManiaStudios.',
        extensionId: 'lmsclonesplus',
        extensionURL: 'https://extensions.rCodenow.org/LukeManiaStudios/ClonesPlus.js',
        iconURL: clonesPlusIcon
    }),
    galleryItem({
        name: 'Clipping & Blending',
        description: 'Clipping outside of a specified rectangular area and additive color blending. Created by Vadik1.',
        extensionId: 'xeltallivclipblend',
        extensionURL: 'https://extensions.rCodenow.org/Xeltalliv/clippingblending.js',
        iconURL: clippingBlendingIcon
    }),
    galleryItem({
        name: 'Text',
        description: 'Manipulate characters and text. Originally created by CST1229.',
        extensionId: 'strings',
        extensionURL: 'https://extensions.rCodenow.org/text.js',
        iconURL: textIcon
    }),
    galleryItem({
        name: 'Bitwise',
        description: 'Blocks that operate on the binary representation of numbers in computers.',
        extensionId: 'Bitwise',
        extensionURL: 'https://extensions.rCodenow.org/bitwise.js',
        iconURL: bitwiseIcon
    }),
    galleryItem({
        name: 'RegExp',
        description: 'Full interface for working with Regular Expressions. Created by TrueFantom.',
        extensionId: 'truefantomregexp',
        extensionURL: 'https://extensions.rCodenow.org/true-fantom/regexp.js',
        iconURL: regexIcon
    }),
    galleryItem({
        name: 'Box2D Physics',
        description: 'Two dimensional physics. Originally created by griffpatch.',
        extensionId: 'griffpatch',
        extensionURL: 'https://extensions.rCodenow.org/box2d.js',
        iconURL: box2dIcon
    }),
    galleryItem({
        name: 'Fetch',
        description: 'Make requests to the broader internet.',
        extensionId: 'fetch',
        extensionURL: 'https://extensions.rCodenow.org/fetch.js',
        iconURL: fetchIcon
    }),
    galleryItem({
        name: 'Local Storage',
        description: 'Store data persistently.',
        extensionId: 'localstorage',
        extensionURL: 'https://extensions.rCodenow.org/local-storage.js',
        iconURL: unknownIcon
    }),
    galleryItem({
        name: 'Utilities',
        description: 'A bunch of interesting blocks. Originally created by Sheep_maker.',
        extensionId: 'utilities',
        extensionURL: 'https://extensions.rCodenow.org/utilities.js',
        iconURL: utilitiesIcon
    }),
    {
        name: (
            <FormattedMessage
                defaultMessage="Custom Extension"
                description="Name of library item to load a custom extension from a remote source"
                id="tw.customExtension.name"
            />
        ),
        extensionId: '',
        iconURL: customExtensionIcon,
        description: (
            <FormattedMessage
                defaultMessage="Load custom extensions from URLs, files, or JavaScript source code."
                description="Description of library item to load a custom extension from a custom source"
                id="tw.customExtension.description"
            />
        ),
        tags: ['upload'],
        incompatibleWithScratch: true,
        featured: true
    },
    {
        name: 'Local',
        extensionId: 'local',
        collaborator: '',
        iconURL: customExtensionIcon,
        description: (
            <FormattedMessage
                defaultMessage=""
                description=""
                id="gui.extension.localdiscribe"
            />
        ),
        incompatibleWithScratch: true,
        tags: ['upload'],
        featured: true
    }
];
